---
title: 'Website SPA Restructure - MPA to Single Page Conversion'
slug: 'spa-restructure'
created: '2026-01-02'
updated: '2026-01-02'
status: 'ready-for-dev'
stepsCompleted: [1, 2, 3, 4]
review_status: 'adversarial-review-complete'
tech_stack:
  - Next.js 16 (App Router)
  - React 19
  - TypeScript 5.5
  - Tailwind CSS 3.4
  - Sanity CMS
  - Framer Motion 11
  - Lucide React
files_to_modify:
  - components/Navigation.tsx
  - components/Footer.tsx
  - app/(frontend)/page.tsx
  - app/(frontend)/page-client.tsx
  - app/globals.css
  - lib/sanity.ts
  - sanity/lib/queries.ts
files_to_create:
  - components/sections/HeroSection.tsx
  - components/sections/AboutSection.tsx
  - components/sections/OakSlabsSection.tsx
  - components/sections/WarehouseSection.tsx
  - components/sections/ProductsSection.tsx
  - components/sections/ManufacturingSection.tsx
  - components/sections/SustainabilitySection.tsx
  - components/sections/ContactSection.tsx
  - components/sections/index.ts
files_to_delete:
  - app/(frontend)/about/page.tsx
  - app/(frontend)/products/page.tsx
  - app/(frontend)/manufacturing/page.tsx
  - app/(frontend)/sustainability/page.tsx
  - app/(frontend)/contact/page.tsx
code_patterns:
  - BlockRenderer switches on __typename to render block components
  - lib/sanity.ts transforms _type to __typename (e.g., hero → PageBlocksHero)
  - Framer Motion whileInView animations with viewport={{ once: true }}
  - CSS scroll-behavior: smooth for native smooth scrolling
  - scroll-margin-top: 5rem for sticky header offset
  - IntersectionObserver with rootMargin for scroll spy
  - 'use client' directive for interactive components
test_patterns:
  - Manual browser testing for scroll behavior
  - Mobile responsive testing at 320px, 768px, 1024px, 1440px
  - Anchor link deep-linking verification
  - Cross-browser: Chrome, Firefox, Safari, Edge
---

# Tech-Spec: Website SPA Restructure - MPA to Single Page Conversion

**Created:** 2026-01-02
**Updated:** 2026-01-02 (Post-Adversarial Review)
**Status:** Ready for Development
**Epic:** EPIC-001 (28 points, 8 stories)

---

## Overview

### Problem Statement

The current MPA structure with 6 separate routes creates friction in the user journey. Client requires a seamless scroll experience with all content on a single page, plus two missing sections (Oak Slabs, Warehouse).

### Solution

Convert navigation to anchor-based links with scroll spy, consolidate all page content into section components on the main page, create new Oak Slabs and Warehouse sections, fetch all content via a single consolidated GROQ query, and remove deprecated page routes.

### Scope

**In Scope:**
- Navigation anchor conversion with scroll spy (IntersectionObserver)
- 8 section components (Hero, About, Oak Slabs, Warehouse, Products, Manufacturing, Sustainability, Contact)
- New Sanity page documents for Oak Slabs and Warehouse
- Single consolidated GROQ query fetching all sections
- Smooth scroll with 80px header offset (CSS scroll-behavior: smooth)
- Mobile menu anchor support with immediate auto-close
- Deprecated route removal (5 page files)
- URL hash updates on scroll/navigation
- Initial hash scroll on page load
- Loading states and error boundaries
- Accessibility: skip-nav, focus management, reduced-motion support

**Out of Scope:**
- E-commerce functionality
- User authentication
- Multi-language support
- Blog/News section
- Lazy loading optimization (future enhancement)
- Back-to-top button (future enhancement)

---

## Type Definitions

### TypeScript Types (Add to lib/sanity.ts)

**NOTE:** These types EXTEND the existing `SanityPage` and `SanityBlock` interfaces already in lib/sanity.ts. The existing interface uses nested `seo` object, so we maintain compatibility.

```typescript
// EXISTING in lib/sanity.ts - DO NOT DUPLICATE:
// - SanityBlock (lines 6-10)
// - SanityPage (lines 12-23) - uses nested seo{} object

// ADD these new types to lib/sanity.ts:

// Consolidated sections data for SPA
export interface AllSectionsData {
  hero: SanityPage | null
  about: SanityPage | null
  oakSlabs: SanityPage | null
  warehouse: SanityPage | null
  products: SanityPage | null
  manufacturing: SanityPage | null
  sustainability: SanityPage | null
  contact: SanityPage | null
}

// Section component props pattern
export interface SectionProps {
  data: SanityPage | null
}
```

**IMPORTANT - Existing SanityPage Interface:**
The existing `lib/sanity.ts` already defines `SanityPage` with a NESTED `seo` object:
```typescript
// Already exists in lib/sanity.ts (DO NOT DUPLICATE):
export interface SanityPage {
  _id: string
  title: string
  slug: string
  description?: string
  blocks: SanityBlock[]
  seo?: {
    title?: string
    description?: string
    ogImage?: any
  }
}
```

The GROQ query and transform functions must match this existing structure.

---

## Context for Development

### Codebase Patterns

**Block Rendering Pipeline:**
```
Sanity CMS → GROQ Query → lib/sanity.ts (transform _type → __typename) → BlockRenderer → Block Components
```

**Scroll Behavior Configuration:**
- Method: CSS `scroll-behavior: smooth` (native, accessible, no JS overhead)
- Offset: `scroll-margin-top: 5rem` (80px = nav height h-20)
- Easing: Browser default smooth scroll (approximately ease-out)
- Interruption: Browser handles natively (user scroll interrupts animation)

**Animation Pattern (Framer Motion):**
```typescript
// Standard animation variant for section content
const sectionAnimation = {
  initial: { opacity: 0, y: 40 },
  whileInView: { opacity: 1, y: 0 },
  viewport: { once: true, margin: '-100px' },
  transition: { duration: 0.8, ease: [0.16, 1, 0.3, 1] }
}

// Usage: viewport.once ensures animation fires only once per session
// viewport.margin triggers slightly before element enters view
```

**IntersectionObserver Configuration Rationale:**
```typescript
{
  rootMargin: '-50% 0px -50% 0px',  // Trigger when section center hits viewport center
  threshold: 0                       // Any intersection triggers callback
}
// Why -50%? Creates a "detection zone" in the middle of the viewport.
// Section is "active" when its center crosses the viewport center.
// This prevents rapid switching when scrolling through section boundaries.
// Works for sections of any height because it's percentage-based.
```

### Technical Decisions

| Decision | Choice | Rationale |
|----------|--------|-----------|
| Scroll Method | CSS `scroll-behavior: smooth` | Native, accessible, respects `prefers-reduced-motion`, no JS |
| Scroll Spy | IntersectionObserver with -50% rootMargin | Center detection, percentage-based works for any section height |
| Race Condition Fix | useEffect with cleanup, null checks | Observer only created after client-side hydration |
| Error Handling | Graceful fallback in each section | Single query failure doesn't crash entire page |
| Animation Trigger | `viewport: { once: true }` | Animations fire once per session, not on every scroll |
| Mobile Menu Close | Immediate `setIsOpen(false)` | No delay, menu closes before scroll begins |
| Hash on Load | useEffect checks `window.location.hash` | Scrolls to section after hydration |

---

## Implementation Plan

### Task Execution Order

Tasks are ordered by dependency - complete each task fully before moving to the next.

---

### Phase 1: Infrastructure Setup

#### Task 1: Add Scroll Offset and Accessibility CSS
- **File:** `app/globals.css`
- **Action:** Add scroll-margin-top, skip-nav, and reduced-motion support
- **Code to add:**
  ```css
  /* Scroll offset for sticky header (80px = h-20) */
  /* Use specific IDs to avoid affecting nested sections in blocks */
  #hero,
  #about,
  #oak-slabs,
  #warehouse,
  #products,
  #manufacturing,
  #sustainability,
  #contact {
    scroll-margin-top: 5rem;
  }

  /* Skip navigation link for accessibility */
  .skip-nav {
    position: absolute;
    left: -9999px;
    z-index: 100;
    padding: 1rem;
    background: white;
    color: black;
    text-decoration: underline;
  }

  .skip-nav:focus {
    left: 0;
  }

  /* Respect reduced motion preferences */
  @media (prefers-reduced-motion: reduce) {
    html {
      scroll-behavior: auto;
    }

    *, *::before, *::after {
      animation-duration: 0.01ms !important;
      animation-iteration-count: 1 !important;
      transition-duration: 0.01ms !important;
    }
  }
  ```

---

#### Task 2: Create Consolidated GROQ Query
- **File:** `sanity/lib/queries.ts`
- **Action:** Add new `allSectionsQuery` with complete field specifications
- **IMPORTANT:** Query structure matches EXISTING `SanityPage` interface with nested `seo` object. Image assets use `_ref` pattern (NOT url) - the existing `transformSanityBlocks` uses `urlFor()` to convert.
- **Code to add:**
  ```typescript
  // Reusable block projection - matches existing pageBySlugQuery pattern
  // NOTE: Images keep asset._ref structure - urlFor() converts to URLs in transform
  const blockProjection = `{
    _type,
    _key,
    heading,
    subheading,
    text,
    content,
    eyebrow,
    alignment,
    backgroundColor,
    buttonText,
    buttonLink,
    stats,
    quote,
    author,
    role,
    backgroundImage {
      _type,
      asset,
      alt,
      hotspot,
      crop
    },
    image {
      _type,
      asset,
      alt,
      hotspot,
      crop
    },
    items[] {
      _key,
      title,
      description,
      icon,
      stat,
      label,
      image {
        _type,
        asset,
        alt
      }
    }
  }`

  // Consolidated query for SPA - fetches all sections at once
  // Uses nested seo{} to match existing SanityPage interface
  export const allSectionsQuery = groq`{
    "hero": *[_type == "page" && slug.current == "home"][0] {
      _id,
      title,
      "slug": slug.current,
      description,
      seo {
        title,
        description,
        ogImage
      },
      blocks[] ${blockProjection}
    },
    "about": *[_type == "page" && slug.current == "about"][0] {
      _id,
      title,
      "slug": slug.current,
      description,
      seo {
        title,
        description,
        ogImage
      },
      blocks[] ${blockProjection}
    },
    "oakSlabs": *[_type == "page" && slug.current == "oak-slabs"][0] {
      _id,
      title,
      "slug": slug.current,
      description,
      seo {
        title,
        description,
        ogImage
      },
      blocks[] ${blockProjection}
    },
    "warehouse": *[_type == "page" && slug.current == "warehouse"][0] {
      _id,
      title,
      "slug": slug.current,
      description,
      seo {
        title,
        description,
        ogImage
      },
      blocks[] ${blockProjection}
    },
    "products": *[_type == "page" && slug.current == "products"][0] {
      _id,
      title,
      "slug": slug.current,
      description,
      seo {
        title,
        description,
        ogImage
      },
      blocks[] ${blockProjection}
    },
    "manufacturing": *[_type == "page" && slug.current == "manufacturing"][0] {
      _id,
      title,
      "slug": slug.current,
      description,
      seo {
        title,
        description,
        ogImage
      },
      blocks[] ${blockProjection}
    },
    "sustainability": *[_type == "page" && slug.current == "sustainability"][0] {
      _id,
      title,
      "slug": slug.current,
      description,
      seo {
        title,
        description,
        ogImage
      },
      blocks[] ${blockProjection}
    },
    "contact": *[_type == "page" && slug.current == "contact"][0] {
      _id,
      title,
      "slug": slug.current,
      description,
      seo {
        title,
        description,
        ogImage
      },
      blocks[] ${blockProjection}
    }
  }`
  ```

---

#### Task 3: Add Consolidated Fetch Function with Error Handling
- **File:** `lib/sanity.ts`
- **Action:** Add `getAllSections()` function with proper error handling
- **IMPORTANT:** Uses EXISTING `transformSanityBlocks()` function (lines 37-75) which already handles:
  - Converting `_type` to `__typename` via `typeToTypename` map
  - Converting image `asset._ref` to URLs via `urlFor()` helper
  - This is NOT a new transform - we reuse the existing one for consistency
- **Code to add:**
  ```typescript
  import { allSectionsQuery } from '@/sanity/lib/queries'

  // ADD this type (SanityBlock and SanityPage already exist - DO NOT DUPLICATE)
  export interface AllSectionsData {
    hero: SanityPage | null
    about: SanityPage | null
    oakSlabs: SanityPage | null
    warehouse: SanityPage | null
    products: SanityPage | null
    manufacturing: SanityPage | null
    sustainability: SanityPage | null
    contact: SanityPage | null
  }

  // Empty sections data for error fallback
  const emptySections: AllSectionsData = {
    hero: null,
    about: null,
    oakSlabs: null,
    warehouse: null,
    products: null,
    manufacturing: null,
    sustainability: null,
    contact: null,
  }

  /**
   * Fetches all section data for the SPA in a single query.
   * Returns null for any section that doesn't exist in Sanity.
   * On complete failure, returns empty sections object (all null).
   *
   * Uses existing transformSanityBlocks() for consistent block transformation:
   * - _type → __typename conversion
   * - Image asset refs → URLs via urlFor()
   */
  export async function getAllSections(): Promise<AllSectionsData> {
    try {
      const data = await client.fetch<AllSectionsData>(allSectionsQuery, {}, {
        next: { revalidate: 60 } // Revalidate every 60 seconds
      })

      if (!data) {
        console.warn('getAllSections: No data returned from Sanity')
        return emptySections
      }

      // Transform blocks for each section using EXISTING transformSanityBlocks
      // This function already handles _type → __typename and asset._ref → URL
      const transformSection = (section: SanityPage | null): SanityPage | null => {
        if (!section) return null
        return {
          ...section,
          blocks: section.blocks ? transformSanityBlocks(section.blocks) : []
        }
      }

      return {
        hero: transformSection(data.hero),
        about: transformSection(data.about),
        oakSlabs: transformSection(data.oakSlabs),
        warehouse: transformSection(data.warehouse),
        products: transformSection(data.products),
        manufacturing: transformSection(data.manufacturing),
        sustainability: transformSection(data.sustainability),
        contact: transformSection(data.contact),
      }
    } catch (error) {
      console.error('getAllSections: Error fetching sections:', error)
      return emptySections
    }
  }
  ```

---

### Phase 2: Section Components

#### Task 4: Create Section Components Directory
- **Action:** Create `components/sections/` directory
- **Command:** `mkdir -p components/sections`

---

#### Task 5: Create HeroSection Component
- **File:** `components/sections/HeroSection.tsx`
- **IMPORTANT:** The existing `Hero` component uses `<Link>` which doesn't work with anchor hrefs. For fallback, use inline implementation with `<a>` tag for anchor links.
- **Code:**
  ```typescript
  'use client'

  import { BlockRenderer } from '@/components/blocks'
  import type { SanityPage } from '@/lib/sanity'

  interface HeroSectionProps {
    data: SanityPage | null
  }

  export default function HeroSection({ data }: HeroSectionProps) {
    return (
      <section id="hero" className="scroll-mt-20" aria-label="Hero">
        {data?.blocks && data.blocks.length > 0 ? (
          <BlockRenderer blocks={data.blocks} />
        ) : (
          // Inline fallback - don't use Hero component because it uses <Link> for CTA
          // which doesn't work correctly with anchor hrefs like "#contact"
          <div className="h-[90vh] relative flex items-center justify-center overflow-hidden">
            <div className="absolute inset-0 bg-gradient-to-br from-moooi-cream via-moooi-sand to-moooi-gold opacity-30" />
            <div className="relative z-10 text-center px-6 max-w-4xl">
              <h1 className="text-5xl md:text-7xl font-display font-bold mb-6 animate-fade-in">
                Industrial Timber Supply You Can Build Your Business On
              </h1>
              <p className="text-xl md:text-2xl text-moooi-slate mb-8 animate-slide-up">
                Your supply chain doesn't have room for inconsistency. Precision-manufactured solid oak furniture components with documented quality standards.
              </p>
              <a
                href="#contact"
                className="inline-block bg-moooi-charcoal text-white px-10 py-4 rounded-full font-medium hover:bg-moooi-gold hover:text-moooi-charcoal transition-all duration-300 transform hover:scale-105"
              >
                Request a Quote
              </a>
            </div>
          </div>
        )}
      </section>
    )
  }
  ```

---

#### Task 6: Create AboutSection Component
- **File:** `components/sections/AboutSection.tsx`
- **Code:**
  ```typescript
  'use client'

  import { motion } from 'framer-motion'
  import { BlockRenderer } from '@/components/blocks'
  import type { SanityPage } from '@/lib/sanity'

  interface AboutSectionProps {
    data: SanityPage | null
  }

  export default function AboutSection({ data }: AboutSectionProps) {
    return (
      <section id="about" className="scroll-mt-20" aria-label="About Us">
        {data?.blocks && data.blocks.length > 0 ? (
          <BlockRenderer blocks={data.blocks} />
        ) : (
          <div className="py-20 px-6 max-w-4xl mx-auto text-center">
            <motion.div
              initial={{ opacity: 0, y: 40 }}
              whileInView={{ opacity: 1, y: 0 }}
              viewport={{ once: true, margin: '-100px' }}
              transition={{ duration: 0.8, ease: [0.16, 1, 0.3, 1] }}
            >
              <h2 className="text-4xl md:text-5xl font-display font-bold mb-6">
                About Timber International
              </h2>
              <p className="text-xl text-moooi-slate">
                A partnership-driven timber manufacturer committed to reliability and quality.
                We scaled our operations to meet industrial demand while maintaining
                the craftsmanship standards our partners depend on.
              </p>
            </motion.div>
          </div>
        )}
      </section>
    )
  }
  ```

---

#### Task 7: Create OakSlabsSection Component (NEW)
- **File:** `components/sections/OakSlabsSection.tsx`
- **Code:**
  ```typescript
  'use client'

  import { motion } from 'framer-motion'
  import { BlockRenderer } from '@/components/blocks'
  import type { SanityPage } from '@/lib/sanity'

  interface OakSlabsSectionProps {
    data: SanityPage | null
  }

  const containerVariants = {
    hidden: { opacity: 0 },
    visible: {
      opacity: 1,
      transition: { staggerChildren: 0.15 }
    }
  }

  const itemVariants = {
    hidden: { opacity: 0, y: 30 },
    visible: {
      opacity: 1,
      y: 0,
      transition: { duration: 0.6, ease: [0.16, 1, 0.3, 1] }
    }
  }

  export default function OakSlabsSection({ data }: OakSlabsSectionProps) {
    return (
      <section id="oak-slabs" className="scroll-mt-20 bg-moooi-sand" aria-label="Oak Slabs">
        {data?.blocks && data.blocks.length > 0 ? (
          <BlockRenderer blocks={data.blocks} />
        ) : (
          <div className="py-20 px-6 max-w-6xl mx-auto">
            <motion.div
              initial={{ opacity: 0, y: 40 }}
              whileInView={{ opacity: 1, y: 0 }}
              viewport={{ once: true, margin: '-100px' }}
              transition={{ duration: 0.8, ease: [0.16, 1, 0.3, 1] }}
              className="text-center mb-16"
            >
              <h2 className="text-4xl md:text-5xl font-display font-bold mb-6">
                Solid Oak. Industrial Scale.
              </h2>
              <p className="text-xl text-moooi-slate max-w-3xl mx-auto">
                Premium solid oak slabs manufactured to your specifications.
                Consistent quality, reliable supply, competitive pricing.
              </p>
            </motion.div>

            <motion.div
              variants={containerVariants}
              initial="hidden"
              whileInView="visible"
              viewport={{ once: true, margin: '-50px' }}
              className="grid md:grid-cols-3 gap-8"
            >
              <motion.div variants={itemVariants} className="bg-white p-8 rounded-2xl shadow-sm">
                <h3 className="text-2xl font-bold mb-4">Custom Dimensions</h3>
                <p className="text-moooi-slate">
                  Cut to your exact specifications with precision CNC machinery.
                  Tolerances within ±0.5mm.
                </p>
              </motion.div>
              <motion.div variants={itemVariants} className="bg-white p-8 rounded-2xl shadow-sm">
                <h3 className="text-2xl font-bold mb-4">Kiln Dried</h3>
                <p className="text-moooi-slate">
                  Moisture content controlled to 8-12% for stability and longevity.
                  Documented drying records available.
                </p>
              </motion.div>
              <motion.div variants={itemVariants} className="bg-white p-8 rounded-2xl shadow-sm">
                <h3 className="text-2xl font-bold mb-4">FSC Certified</h3>
                <p className="text-moooi-slate">
                  Responsibly sourced from sustainable European forests.
                  Chain of custody documentation provided.
                </p>
              </motion.div>
            </motion.div>

            <motion.div
              initial={{ opacity: 0, y: 20 }}
              whileInView={{ opacity: 1, y: 0 }}
              viewport={{ once: true }}
              transition={{ duration: 0.6, delay: 0.4 }}
              className="text-center mt-12"
            >
              <a
                href="#contact"
                className="inline-block bg-moooi-gold text-white px-8 py-4 rounded-full font-medium hover:bg-moooi-gold/90 transition-colors"
              >
                Request Specifications
              </a>
            </motion.div>
          </div>
        )}
      </section>
    )
  }
  ```

---

#### Task 8: Create WarehouseSection Component (NEW)
- **File:** `components/sections/WarehouseSection.tsx`
- **Code:**
  ```typescript
  'use client'

  import { motion } from 'framer-motion'
  import { BlockRenderer } from '@/components/blocks'
  import { Warehouse, Truck, Clock } from 'lucide-react'
  import type { SanityPage } from '@/lib/sanity'

  interface WarehouseSectionProps {
    data: SanityPage | null
  }

  const features = [
    {
      icon: Warehouse,
      title: '10,000m² Storage',
      description: 'Climate-controlled facilities for optimal timber preservation.'
    },
    {
      icon: Truck,
      title: 'Pan-European Delivery',
      description: 'Reliable logistics network covering all major markets.'
    },
    {
      icon: Clock,
      title: '48-Hour Dispatch',
      description: 'In-stock items shipped within 2 business days.'
    }
  ]

  export default function WarehouseSection({ data }: WarehouseSectionProps) {
    return (
      <section id="warehouse" className="scroll-mt-20" aria-label="Warehouse">
        {data?.blocks && data.blocks.length > 0 ? (
          <BlockRenderer blocks={data.blocks} />
        ) : (
          <div className="py-20 px-6 max-w-6xl mx-auto">
            <motion.div
              initial={{ opacity: 0, y: 40 }}
              whileInView={{ opacity: 1, y: 0 }}
              viewport={{ once: true, margin: '-100px' }}
              transition={{ duration: 0.8, ease: [0.16, 1, 0.3, 1] }}
              className="text-center mb-16"
            >
              <h2 className="text-4xl md:text-5xl font-display font-bold mb-6">
                Storage & Logistics Excellence
              </h2>
              <p className="text-xl text-moooi-slate max-w-3xl mx-auto">
                Modern warehouse facilities ensure your timber is stored properly
                and shipped efficiently to meet your production schedules.
              </p>
            </motion.div>

            <div className="grid md:grid-cols-3 gap-8">
              {features.map((feature, index) => (
                <motion.div
                  key={feature.title}
                  initial={{ opacity: 0, y: 30 }}
                  whileInView={{ opacity: 1, y: 0 }}
                  viewport={{ once: true }}
                  transition={{ duration: 0.6, delay: index * 0.15 }}
                  className="text-center p-8"
                >
                  <feature.icon className="w-12 h-12 mx-auto mb-4 text-moooi-gold" />
                  <h3 className="text-2xl font-bold mb-3">{feature.title}</h3>
                  <p className="text-moooi-slate">{feature.description}</p>
                </motion.div>
              ))}
            </div>
          </div>
        )}
      </section>
    )
  }
  ```

---

#### Task 9: Create ProductsSection Component
- **File:** `components/sections/ProductsSection.tsx`
- **Code:**
  ```typescript
  'use client'

  import { motion } from 'framer-motion'
  import { BlockRenderer } from '@/components/blocks'
  import type { SanityPage } from '@/lib/sanity'

  interface ProductsSectionProps {
    data: SanityPage | null
  }

  export default function ProductsSection({ data }: ProductsSectionProps) {
    return (
      <section id="products" className="scroll-mt-20 bg-moooi-cream" aria-label="Products">
        {data?.blocks && data.blocks.length > 0 ? (
          <BlockRenderer blocks={data.blocks} />
        ) : (
          <div className="py-20 px-6 max-w-4xl mx-auto text-center">
            <motion.div
              initial={{ opacity: 0, y: 40 }}
              whileInView={{ opacity: 1, y: 0 }}
              viewport={{ once: true, margin: '-100px' }}
              transition={{ duration: 0.8, ease: [0.16, 1, 0.3, 1] }}
            >
              <h2 className="text-4xl md:text-5xl font-display font-bold mb-6">
                Specifications You Can Count On
              </h2>
              <p className="text-xl text-moooi-slate">
                Industrial solid oak solutions manufactured to your specifications.
                Table tops, panels, furniture components, and custom orders.
              </p>
            </motion.div>
          </div>
        )}
      </section>
    )
  }
  ```

---

#### Task 10: Create ManufacturingSection Component
- **File:** `components/sections/ManufacturingSection.tsx`
- **Code:**
  ```typescript
  'use client'

  import { motion } from 'framer-motion'
  import { BlockRenderer } from '@/components/blocks'
  import type { SanityPage } from '@/lib/sanity'

  interface ManufacturingSectionProps {
    data: SanityPage | null
  }

  export default function ManufacturingSection({ data }: ManufacturingSectionProps) {
    return (
      <section id="manufacturing" className="scroll-mt-20" aria-label="Manufacturing">
        {data?.blocks && data.blocks.length > 0 ? (
          <BlockRenderer blocks={data.blocks} />
        ) : (
          <div className="py-20 px-6 max-w-4xl mx-auto text-center">
            <motion.div
              initial={{ opacity: 0, y: 40 }}
              whileInView={{ opacity: 1, y: 0 }}
              viewport={{ once: true, margin: '-100px' }}
              transition={{ duration: 0.8, ease: [0.16, 1, 0.3, 1] }}
            >
              <h2 className="text-4xl md:text-5xl font-display font-bold mb-6">
                Modern Equipment. Rigorous Standards.
              </h2>
              <p className="text-xl text-moooi-slate">
                State-of-the-art CNC machinery and quality control processes
                ensure every piece meets your specifications.
              </p>
            </motion.div>
          </div>
        )}
      </section>
    )
  }
  ```

---

#### Task 11: Create SustainabilitySection Component
- **File:** `components/sections/SustainabilitySection.tsx`
- **Code:**
  ```typescript
  'use client'

  import { motion } from 'framer-motion'
  import { BlockRenderer } from '@/components/blocks'
  import type { SanityPage } from '@/lib/sanity'

  interface SustainabilitySectionProps {
    data: SanityPage | null
  }

  export default function SustainabilitySection({ data }: SustainabilitySectionProps) {
    return (
      <section id="sustainability" className="scroll-mt-20 bg-moooi-sand" aria-label="Sustainability">
        {data?.blocks && data.blocks.length > 0 ? (
          <BlockRenderer blocks={data.blocks} />
        ) : (
          <div className="py-20 px-6 max-w-4xl mx-auto text-center">
            <motion.div
              initial={{ opacity: 0, y: 40 }}
              whileInView={{ opacity: 1, y: 0 }}
              viewport={{ once: true, margin: '-100px' }}
              transition={{ duration: 0.8, ease: [0.16, 1, 0.3, 1] }}
            >
              <h2 className="text-4xl md:text-5xl font-display font-bold mb-6">
                Responsible Sourcing
              </h2>
              <p className="text-xl text-moooi-slate mb-8">
                FSC certified timber from responsibly managed forests.
                Complete chain of custody documentation for compliance requirements.
              </p>
              <div className="flex justify-center gap-8 flex-wrap">
                <div className="bg-white px-6 py-3 rounded-full font-medium">
                  FSC Certified
                </div>
                <div className="bg-white px-6 py-3 rounded-full font-medium">
                  PEFC Available
                </div>
                <div className="bg-white px-6 py-3 rounded-full font-medium">
                  EU Timber Regulation
                </div>
              </div>
            </motion.div>
          </div>
        )}
      </section>
    )
  }
  ```

---

#### Task 12: Create ContactSection Component
- **File:** `components/sections/ContactSection.tsx`
- **Code:**
  ```typescript
  'use client'

  import { motion } from 'framer-motion'
  import { BlockRenderer } from '@/components/blocks'
  import ContactForm from '@/components/ContactForm'
  import type { SanityPage } from '@/lib/sanity'

  interface ContactSectionProps {
    data: SanityPage | null
  }

  export default function ContactSection({ data }: ContactSectionProps) {
    return (
      <section id="contact" className="scroll-mt-20" aria-label="Contact">
        {data?.blocks && data.blocks.length > 0 ? (
          <BlockRenderer blocks={data.blocks} />
        ) : (
          <div className="py-20 px-6 max-w-4xl mx-auto">
            <motion.div
              initial={{ opacity: 0, y: 40 }}
              whileInView={{ opacity: 1, y: 0 }}
              viewport={{ once: true, margin: '-100px' }}
              transition={{ duration: 0.8, ease: [0.16, 1, 0.3, 1] }}
            >
              <h2 className="text-4xl md:text-5xl font-display font-bold mb-6 text-center">
                Let's Discuss Your Requirements
              </h2>
              <p className="text-xl text-moooi-slate mb-12 text-center">
                Tell us about your project and we'll prepare a detailed quote.
              </p>
              <ContactForm />
            </motion.div>
          </div>
        )}
      </section>
    )
  }
  ```

---

#### Task 13: Create Sections Index Export
- **File:** `components/sections/index.ts`
- **Code:**
  ```typescript
  export { default as HeroSection } from './HeroSection'
  export { default as AboutSection } from './AboutSection'
  export { default as OakSlabsSection } from './OakSlabsSection'
  export { default as WarehouseSection } from './WarehouseSection'
  export { default as ProductsSection } from './ProductsSection'
  export { default as ManufacturingSection } from './ManufacturingSection'
  export { default as SustainabilitySection } from './SustainabilitySection'
  export { default as ContactSection } from './ContactSection'
  ```

---

### Phase 3: Navigation Updates

#### Task 14: Update Navigation Component (Complete Implementation)
- **File:** `components/Navigation.tsx`
- **Action:** Full replacement with anchor links, scroll spy, and accessibility
- **Complete Code:**
  ```typescript
  'use client'

  import { useState, useEffect, useCallback } from 'react'
  import { Menu, X } from 'lucide-react'

  const navLinks = [
    { href: '#hero', label: 'Home' },
    { href: '#about', label: 'About' },
    { href: '#oak-slabs', label: 'Oak Slabs' },
    { href: '#warehouse', label: 'Warehouse' },
    { href: '#products', label: 'Products' },
    { href: '#manufacturing', label: 'Manufacturing' },
    { href: '#sustainability', label: 'Sustainability' },
    { href: '#contact', label: 'Contact' },
  ]

  export default function Navigation() {
    const [isOpen, setIsOpen] = useState(false)
    const [activeSection, setActiveSection] = useState('hero')
    const [isClient, setIsClient] = useState(false)

    // Handle initial hash scroll after hydration
    useEffect(() => {
      setIsClient(true)

      // Check for hash in URL on load
      const hash = window.location.hash
      if (hash) {
        // Small delay to ensure sections are mounted
        setTimeout(() => {
          const element = document.querySelector(hash)
          if (element) {
            element.scrollIntoView({ behavior: 'smooth' })
            setActiveSection(hash.slice(1))
          }
        }, 100)
      }
    }, [])

    // Scroll spy using IntersectionObserver
    useEffect(() => {
      if (!isClient) return

      // Get all section elements
      const sectionIds = navLinks.map(link => link.href.slice(1))
      const sections = sectionIds
        .map(id => document.getElementById(id))
        .filter((el): el is HTMLElement => el !== null)

      if (sections.length === 0) return

      const observer = new IntersectionObserver(
        (entries) => {
          entries.forEach((entry) => {
            if (entry.isIntersecting) {
              const newSection = entry.target.id
              setActiveSection(newSection)

              // Update URL hash without triggering scroll
              const currentHash = window.location.hash.slice(1)
              if (currentHash !== newSection) {
                window.history.replaceState(null, '', `#${newSection}`)
              }
            }
          })
        },
        {
          // Trigger when section center hits viewport center
          // -50% from top and bottom creates center detection zone
          rootMargin: '-50% 0px -50% 0px',
          threshold: 0
        }
      )

      sections.forEach((section) => observer.observe(section))

      return () => {
        observer.disconnect()
      }
    }, [isClient])

    // Handle navigation click
    const handleNavClick = useCallback((e: React.MouseEvent<HTMLAnchorElement>, href: string) => {
      // Close mobile menu immediately
      setIsOpen(false)

      // Update active section immediately for responsiveness
      setActiveSection(href.slice(1))
    }, [])

    // Close mobile menu on escape key
    useEffect(() => {
      const handleEscape = (e: KeyboardEvent) => {
        if (e.key === 'Escape') setIsOpen(false)
      }

      if (isOpen) {
        document.addEventListener('keydown', handleEscape)
        // Prevent body scroll when menu is open
        document.body.style.overflow = 'hidden'
      } else {
        document.body.style.overflow = ''
      }

      return () => {
        document.removeEventListener('keydown', handleEscape)
        document.body.style.overflow = ''
      }
    }, [isOpen])

    return (
      <>
        {/* Skip Navigation Link */}
        <a href="#hero" className="skip-nav">
          Skip to main content
        </a>

        <nav
          className="bg-white/95 backdrop-blur-sm sticky top-0 z-50 border-b border-moooi-sand"
          role="navigation"
          aria-label="Main navigation"
        >
          <div className="max-w-7xl mx-auto px-6">
            <div className="flex justify-between items-center h-20">
              {/* Logo */}
              <a
                href="#hero"
                className="text-2xl font-display font-bold text-moooi-charcoal hover:text-moooi-gold transition-colors"
                onClick={(e) => handleNavClick(e, '#hero')}
              >
                Timber International
              </a>

              {/* Desktop Navigation */}
              <div className="hidden md:flex items-center space-x-8">
                {navLinks.map((link) => (
                  <a
                    key={link.href}
                    href={link.href}
                    onClick={(e) => handleNavClick(e, link.href)}
                    className={`text-sm font-medium transition-colors duration-200 ${
                      activeSection === link.href.slice(1)
                        ? 'text-moooi-gold'
                        : 'text-moooi-charcoal hover:text-moooi-gold'
                    }`}
                    aria-current={activeSection === link.href.slice(1) ? 'page' : undefined}
                  >
                    {link.label}
                  </a>
                ))}
              </div>

              {/* Mobile Menu Button */}
              <button
                onClick={() => setIsOpen(!isOpen)}
                className="md:hidden p-2 text-moooi-charcoal hover:text-moooi-gold transition-colors"
                aria-label={isOpen ? 'Close menu' : 'Open menu'}
                aria-expanded={isOpen}
                aria-controls="mobile-menu"
              >
                {isOpen ? (
                  <X className="w-6 h-6" />
                ) : (
                  <Menu className="w-6 h-6" />
                )}
              </button>
            </div>

            {/* Mobile Navigation */}
            {isOpen && (
              <div
                id="mobile-menu"
                className="md:hidden py-4 border-t border-moooi-sand"
                role="menu"
              >
                {navLinks.map((link) => (
                  <a
                    key={link.href}
                    href={link.href}
                    onClick={(e) => handleNavClick(e, link.href)}
                    className={`block py-3 text-lg transition-colors ${
                      activeSection === link.href.slice(1)
                        ? 'text-moooi-gold font-medium'
                        : 'text-moooi-charcoal hover:text-moooi-gold'
                    }`}
                    role="menuitem"
                    aria-current={activeSection === link.href.slice(1) ? 'page' : undefined}
                  >
                    {link.label}
                  </a>
                ))}
              </div>
            )}
          </div>
        </nav>

        {/* Mobile menu backdrop */}
        {isOpen && (
          <div
            className="md:hidden fixed inset-0 bg-black/20 z-40"
            onClick={() => setIsOpen(false)}
            aria-hidden="true"
          />
        )}
      </>
    )
  }
  ```

---

#### Task 15: Update Footer Component
- **File:** `components/Footer.tsx`
- **Action:** Replace route-based links with anchor links
- **Complete Code:**
  ```typescript
  export default function Footer() {
    return (
      <footer className="bg-moooi-charcoal text-white">
        <div className="max-w-7xl mx-auto px-6 py-16">
          <div className="grid md:grid-cols-4 gap-12 mb-12">
            <div>
              <h3 className="text-2xl font-display font-bold mb-4">Timber International</h3>
              <p className="text-gray-400">
                Premium wood products for industry partners
              </p>
            </div>

            <div>
              <h4 className="font-bold mb-4">Company</h4>
              <ul className="space-y-2">
                <li><a href="#about" className="text-gray-400 hover:text-moooi-gold transition-colors">About</a></li>
                <li><a href="#manufacturing" className="text-gray-400 hover:text-moooi-gold transition-colors">Manufacturing</a></li>
                <li><a href="#sustainability" className="text-gray-400 hover:text-moooi-gold transition-colors">Sustainability</a></li>
              </ul>
            </div>

            <div>
              <h4 className="font-bold mb-4">Products</h4>
              <ul className="space-y-2">
                <li><a href="#products" className="text-gray-400 hover:text-moooi-gold transition-colors">View All</a></li>
              </ul>
            </div>

            <div>
              <h4 className="font-bold mb-4">Connect</h4>
              <ul className="space-y-2">
                <li><a href="#contact" className="text-gray-400 hover:text-moooi-gold transition-colors">Contact</a></li>
                <li><a href="mailto:sales@timber-international.com" className="text-gray-400 hover:text-moooi-gold transition-colors">sales@timber-international.com</a></li>
              </ul>
            </div>
          </div>

          <div className="pt-8 border-t border-gray-800 text-center text-gray-400">
            <p>&copy; {new Date().getFullYear()} Timber International. All rights reserved.</p>
          </div>
        </div>
      </footer>
    )
  }
  ```

---

### Phase 4: Main Page Consolidation

#### Task 16: Update Main Page Server Component
- **File:** `app/(frontend)/page.tsx`
- **Action:** Fetch all sections using consolidated query
- **Complete Code:**
  ```typescript
  import { Suspense } from 'react'
  import { getAllSections } from '@/lib/sanity'
  import SPAPageClient from './page-client'

  // Revalidate every 60 seconds
  export const revalidate = 60

  // Loading skeleton for sections
  function SectionsLoading() {
    return (
      <div className="animate-pulse">
        <div className="h-screen bg-moooi-cream" />
        <div className="h-96 bg-white" />
        <div className="h-96 bg-moooi-sand" />
        <div className="h-96 bg-white" />
      </div>
    )
  }

  export default async function HomePage() {
    const sections = await getAllSections()

    return (
      <Suspense fallback={<SectionsLoading />}>
        <SPAPageClient sections={sections} />
      </Suspense>
    )
  }
  ```

---

#### Task 17: Update Main Page Client Component
- **File:** `app/(frontend)/page-client.tsx`
- **Action:** Render all sections sequentially with error boundary
- **Complete Code:**
  ```typescript
  'use client'

  import { Component, ReactNode } from 'react'
  import {
    HeroSection,
    AboutSection,
    OakSlabsSection,
    WarehouseSection,
    ProductsSection,
    ManufacturingSection,
    SustainabilitySection,
    ContactSection,
  } from '@/components/sections'
  import type { AllSectionsData } from '@/lib/sanity'

  // Error boundary for section failures
  interface ErrorBoundaryProps {
    children: ReactNode
    fallback: ReactNode
  }

  interface ErrorBoundaryState {
    hasError: boolean
  }

  class SectionErrorBoundary extends Component<ErrorBoundaryProps, ErrorBoundaryState> {
    constructor(props: ErrorBoundaryProps) {
      super(props)
      this.state = { hasError: false }
    }

    static getDerivedStateFromError(): ErrorBoundaryState {
      return { hasError: true }
    }

    componentDidCatch(error: Error) {
      console.error('Section render error:', error)
    }

    render() {
      if (this.state.hasError) {
        return this.props.fallback
      }
      return this.props.children
    }
  }

  // Fallback for section errors
  function SectionFallback({ name, id }: { name: string; id: string }) {
    return (
      <section id={id} className="py-20 px-6 text-center bg-moooi-cream scroll-mt-20" aria-label={name}>
        <p className="text-moooi-slate">Unable to load {name} section.</p>
      </section>
    )
  }

  interface SPAPageClientProps {
    sections: AllSectionsData
  }

  export default function SPAPageClient({ sections }: SPAPageClientProps) {
    return (
      <main>
        <SectionErrorBoundary fallback={<SectionFallback name="Hero" id="hero" />}>
          <HeroSection data={sections.hero} />
        </SectionErrorBoundary>

        <SectionErrorBoundary fallback={<SectionFallback name="About" id="about" />}>
          <AboutSection data={sections.about} />
        </SectionErrorBoundary>

        <SectionErrorBoundary fallback={<SectionFallback name="Oak Slabs" id="oak-slabs" />}>
          <OakSlabsSection data={sections.oakSlabs} />
        </SectionErrorBoundary>

        <SectionErrorBoundary fallback={<SectionFallback name="Warehouse" id="warehouse" />}>
          <WarehouseSection data={sections.warehouse} />
        </SectionErrorBoundary>

        <SectionErrorBoundary fallback={<SectionFallback name="Products" id="products" />}>
          <ProductsSection data={sections.products} />
        </SectionErrorBoundary>

        <SectionErrorBoundary fallback={<SectionFallback name="Manufacturing" id="manufacturing" />}>
          <ManufacturingSection data={sections.manufacturing} />
        </SectionErrorBoundary>

        <SectionErrorBoundary fallback={<SectionFallback name="Sustainability" id="sustainability" />}>
          <SustainabilitySection data={sections.sustainability} />
        </SectionErrorBoundary>

        <SectionErrorBoundary fallback={<SectionFallback name="Contact" id="contact" />}>
          <ContactSection data={sections.contact} />
        </SectionErrorBoundary>
      </main>
    )
  }
  ```

---

### Phase 5: Sanity Content Setup

#### Task 18: Create Sanity Sections Verification Script
- **File:** `scripts/verify-spa-sections.ts`
- **Action:** Create script to verify all required page documents exist in Sanity before development
- **Purpose:** Addresses F10 - ensures required Sanity documents exist before proceeding with development
- **Code:**
  ```typescript
  /**
   * Verify all required SPA section documents exist in Sanity
   * Run with: npm run verify:sections
   */
  import { client } from '../sanity/lib/client'

  const REQUIRED_SLUGS = [
    'home',
    'about',
    'oak-slabs',
    'warehouse',
    'products',
    'manufacturing',
    'sustainability',
    'contact'
  ]

  async function verifySections() {
    console.log('Verifying SPA section documents in Sanity...\n')

    const results = await Promise.all(
      REQUIRED_SLUGS.map(async (slug) => {
        try {
          const doc = await client.fetch(
            `*[_type == "page" && slug.current == $slug][0]{ _id, title, "blockCount": count(blocks) }`,
            { slug }
          )
          return {
            slug,
            exists: !!doc,
            title: doc?.title || null,
            blockCount: doc?.blockCount || 0
          }
        } catch (error) {
          return { slug, exists: false, title: null, blockCount: 0, error: String(error) }
        }
      })
    )

    const existing = results.filter(r => r.exists)
    const missing = results.filter(r => !r.exists)

    console.log('✅ Existing documents:')
    existing.forEach(r => {
      console.log(`   ${r.slug}: "${r.title}" (${r.blockCount} blocks)`)
    })

    if (missing.length > 0) {
      console.log('\n❌ Missing documents:')
      missing.forEach(r => {
        console.log(`   ${r.slug}`)
      })
      console.log('\nCreate these documents in Sanity Studio before proceeding.')
      process.exit(1)
    }

    console.log('\n✅ All required section documents exist!')
  }

  verifySections().catch(console.error)
  ```

- **Add to package.json scripts:**
  ```json
  "verify:sections": "tsx scripts/verify-spa-sections.ts"
  ```

---

#### Task 19: Create Oak Slabs Page in Sanity
- **Action:** Use Sanity Studio to create new page document
- **Document values:**
  - **Title:** "Oak Slabs"
  - **Slug:** `oak-slabs`
  - **SEO Title:** "Solid Oak Slabs - Industrial Scale Manufacturing | Timber International"
  - **SEO Description:** "Premium solid oak slabs manufactured to your specifications. Custom dimensions, kiln dried, FSC certified. Request a quote today."
  - **Blocks:** Add hero block + features grid with oak slab content
- **Alternative:** Run Sanity CLI to create programmatically

---

#### Task 20: Create Warehouse Page in Sanity
- **Action:** Use Sanity Studio to create new page document
- **Document values:**
  - **Title:** "Warehouse"
  - **Slug:** `warehouse`
  - **SEO Title:** "Warehouse & Logistics | Timber International"
  - **SEO Description:** "10,000m² climate-controlled storage facilities. Pan-European delivery with 48-hour dispatch for in-stock items."
  - **Blocks:** Add content blocks for warehouse section
- **Notes:** Content can be updated later via CMS

---

### Phase 6: Cleanup

#### Task 21: Delete Deprecated Page Routes
- **Action:** Remove 5 page files and empty directories
- **Commands:**
  ```bash
  # Delete page files
  rm app/(frontend)/about/page.tsx
  rm app/(frontend)/products/page.tsx
  rm app/(frontend)/manufacturing/page.tsx
  rm app/(frontend)/sustainability/page.tsx
  rm app/(frontend)/contact/page.tsx

  # Delete empty directories
  rmdir app/(frontend)/about 2>/dev/null || true
  rmdir app/(frontend)/products 2>/dev/null || true
  rmdir app/(frontend)/manufacturing 2>/dev/null || true
  rmdir app/(frontend)/sustainability 2>/dev/null || true
  rmdir app/(frontend)/contact 2>/dev/null || true
  ```

---

#### Task 22: Verify Build
- **Action:** Run build to ensure no errors
- **Command:** `npm run build`
- **Expected:** Build completes without TypeScript or Next.js errors
- **Verification:**
  1. No type errors in console
  2. All pages compile successfully
  3. Static generation works for root page

---

## Acceptance Criteria

### Navigation & Scroll

- [ ] **AC-1:** Given I am on the website, when I click a navigation link, then the page smoothly scrolls to the corresponding section without a page reload
- [ ] **AC-2:** Given I am scrolling the page, when a section enters the viewport center, then the corresponding nav link is highlighted with gold color (`text-moooi-gold`)
- [ ] **AC-3:** Given I am on mobile, when I click a nav link in the mobile menu, then the menu closes immediately and the page scrolls to the section
- [ ] **AC-4:** Given I click a nav link, when the scroll completes, then the URL hash updates to reflect the current section (e.g., `#about`)
- [ ] **AC-5:** Given a section is at the top of the viewport, when I observe its position, then there is an 80px offset preventing it from hiding under the sticky nav

### Sections

- [ ] **AC-6:** Given I load the homepage, when the page renders, then all 8 sections appear in order: Hero, About, Oak Slabs, Warehouse, Products, Manufacturing, Sustainability, Contact
- [ ] **AC-7:** Given Sanity contains content for a section, when the section renders, then it displays the Sanity content via BlockRenderer
- [ ] **AC-8:** Given Sanity has no content for a section, when the section renders, then it displays fallback placeholder content with Framer Motion animations
- [ ] **AC-9:** Given I am viewing the Oak Slabs section, when it renders, then I see product features (Custom Dimensions, Kiln Dried, FSC Certified) with staggered animations
- [ ] **AC-10:** Given I am viewing the Warehouse section, when it renders, then I see facility info with Lucide icons (Warehouse, Truck, Clock)

### Performance & UX

- [ ] **AC-11:** Given I am loading the page, when all sections are fetched, then a single consolidated GROQ query is used (not 8 separate queries)
- [ ] **AC-12:** Given I am viewing any section, when Framer Motion animations trigger, then they only fire once per section (`viewport: { once: true }`)
- [ ] **AC-13:** Given I visit a direct URL with hash (e.g., `/#products`), when the page loads, then it scrolls to the correct section after hydration
- [ ] **AC-14:** Given the user prefers reduced motion, when animations would trigger, then they are disabled or instant

### Cleanup

- [ ] **AC-15:** Given the old page routes exist, when cleanup is complete, then all 5 deprecated page files are deleted
- [ ] **AC-16:** Given I run `npm run build`, when the build completes, then there are no TypeScript or build errors

### Accessibility

- [ ] **AC-17:** Given I am using keyboard navigation, when I press Tab at the top of the page, then I can use the skip-nav link to jump to main content
- [ ] **AC-18:** Given I am using a screen reader, when I navigate, then section landmarks have appropriate `aria-label` attributes
- [ ] **AC-19:** Given mobile menu is open, when I press Escape, then the menu closes

---

## Additional Context

### Dependencies

| Dependency | Type | Status |
|------------|------|--------|
| Sanity CMS | External | Configured (project: o8zmvtbu8) |
| BlockRenderer | Internal | Available, 7 block types |
| Framer Motion | NPM Package | Installed (v11.x) |
| Tailwind CSS | NPM Package | Configured with moooi palette |
| Lucide React | NPM Package | Installed (for Warehouse icons) |

### Testing Strategy

**Manual Testing Checklist:**
1. ✅ Desktop browsers: Chrome, Firefox, Safari, Edge (latest 2 versions)
2. ✅ Mobile: iOS Safari, Android Chrome
3. ✅ Viewport widths: 320px, 768px, 1024px, 1440px
4. ✅ Scroll spy highlighting accuracy
5. ✅ Anchor deep-linking from external sources
6. ✅ Mobile menu open/close with anchor clicks
7. ✅ Keyboard navigation (Tab, Escape)
8. ✅ Reduced motion preference (disable animations)
9. ✅ Screen reader navigation (VoiceOver/NVDA)

**Functional Tests:**
1. Click each nav link → verify scroll to correct section
2. Scroll through page → verify active nav highlighting updates
3. Visit `/#section` directly → verify scroll on load
4. Refresh page at `/#products` → verify correct section shows
5. Test body scroll lock when mobile menu open

**Build Verification:**
1. `npm run build` completes without errors
2. `npm run dev` shows all sections rendering
3. Lighthouse performance score ≥ 80
4. Lighthouse accessibility score ≥ 90

### Risk Mitigation

| Risk | Mitigation |
|------|------------|
| SEO impact from SPA | Semantic HTML with proper headings (single H1 in hero, H2 per section), anchor deep-links for sharing, section aria-labels |
| Scroll spy false triggers | rootMargin set to `-50% 0px -50% 0px` for center detection; works for any section height |
| Missing Sanity content | Fallback UI with Framer Motion animations in each section component |
| Mobile menu not closing | Explicit `setIsOpen(false)` on nav click; Escape key handler |
| Race condition on hydration | `isClient` state check; IntersectionObserver only created after mount |
| Section render errors | SectionErrorBoundary wraps each section with graceful fallback |
| Query failure | `getAllSections()` returns empty object (all null) on error; sections show fallbacks |

### Notes

- Navigation height is 80px (`h-20`), matched by `scroll-mt-20` (5rem)
- `scroll-behavior: smooth` already in globals.css
- CTA links in hero should point to `#contact` instead of `/contact`
- Lucide icons used in Warehouse section (Warehouse, Truck, Clock)
- Body scroll locked when mobile menu is open
- Future enhancements: scroll progress indicator, back-to-top button, lazy loading
